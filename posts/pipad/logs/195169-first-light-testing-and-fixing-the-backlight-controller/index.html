<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pipad: First light: testing and fixing the backlight controller | Evan Krall</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Pipad: First light: testing and fixing the backlight controller</span></h1>

<h2 class="date">2021/07/10</h2>
</div>

<main>
<p><em>View or comment on this project log on <a href="https://hackaday.io/project/177256/log/195169-first-light-testing-and-fixing-the-backlight-controller">Hackaday.io</a></em></p>

<p>Based on my guess of how complicated testing the different components will be, I decided to test the LCD backlight controller next. </p><p>For this part of my PCB, I basically built the example circuit from the datasheet of the TPS61176. This chip is essentially a DC-DC boost converter and 6 constant-current/PWM sinks. You control it by providing a PWM signal on its PWM/EN input. It decodes this signal and then runs its own PWM on each IFB# pin.</p><figure><img src="/img/pipad/1597361625881508143.png"/></figure><p>Not wanting to risk frying my iPad's display, I wanted to first test with my own string of LEDs. However, I'm a dummy and I neglected to put any test points on this part of my PCB, and because both ends of the trace end up at fine-pitch footprints, I opted to scrape away some solder mask and solder some magnet wire directly to some traces.<br/></p><figure><img src="/img/pipad/1604761625882284943.jpg"/><figcaption>Magnet wire soldered directly to traces. Don't forget to add test points to your PCB!</figcaption></figure><p>I dead-bug soldered a few LEDs together to make my test string, and connected them to the common anode and one of the cathode lines, which works great:</p><figure><img src="/img/pipad/1360781625883433078.gif"/><figcaption>fading the brightness from 0% to 100%</figcaption></figure><p>The TPS61176 will increase the anode voltage until your LEDs start actually drawing current, so it basically supports strings of LEDs with arbitrary forward voltage, within its voltage range.</p><p>After double-checking that I hadn't flipped the pinout for the display, I decided to connect the actual LCD panel. Powered it up and ....nothing. Black. The anode voltage was 3.6V (so, not boosted at all). My hypothesis is that it's detecting an open circuit on all the LED strings, so it disabled the boost converter. Some basic testing confirms:</p><p><span></span></p><p><img src="/img/pipad/4567191625886860728.png"/></p><p>The anode voltage jumps (higher than my Saleae Logic 8 can measure), and then falls back down. I wonder how high that voltage is going? Is it higher than the 18V required to drive the backlight on the LTN097XL01-A01 panel in my iPad?</p><p>I soldered a few more wires onto my board: one at the MODE/FAULT pin, and one at the OVP pin (which is connected to a voltage divider with 143k / 1M, which divides the anode voltage by 8). Rerunning the test gives me:</p><figure><img src="/img/pipad/9818791625887280112.png"/></figure><p>1.5V at the OVP pin. There's my problem! Turns out the reference voltage for the OVP pin is 1.5V, and with the 1/8 division, I'm only getting 12V max. I need to adjust the ratio on my voltage divider.</p><p>After swapping the 143k resistor for an 82k resistor, the backlight works! </p><figure><img src="/img/pipad/4579641625893247899.jpg"/><figcaption>the backlight on my LTN097XL01-A01 glowing</figcaption></figure>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

